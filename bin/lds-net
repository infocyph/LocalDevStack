#!/usr/bin/env bash
set -euo pipefail

ROOT="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)"
# shellcheck disable=SC1090
source "$ROOT/lib/bootstrap.sh"
# shellcheck disable=SC1090
source "$ROOT/lib/io.sh"
# shellcheck disable=SC1090
source "$ROOT/lib/docker.sh"
# shellcheck disable=SC1090
source "$ROOT/lib/docker_exec.sh"
# shellcheck disable=SC1090
source "$ROOT/lib/env.sh"
# shellcheck disable=SC1090
source "$ROOT/lib/net.sh"

sub="${1:-list}"; shift || true
case "$sub" in
  list) lds_net_list;;
  inspect) net="${1:-}"; [[ -n "$net" ]] || die "net inspect <name>"; lds_net_inspect "$net";;
  conflicts) lds_net_conflicts;;
  *) die "net <list|inspect|conflicts>";;
esac
