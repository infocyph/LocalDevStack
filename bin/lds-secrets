#!/usr/bin/env bash
set -euo pipefail

ROOT="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)"
# shellcheck disable=SC1090
source "$ROOT/lib/bootstrap.sh"
# shellcheck disable=SC1090
source "$ROOT/lib/io.sh"
# shellcheck disable=SC1090
source "$ROOT/lib/docker.sh"
# shellcheck disable=SC1090
source "$ROOT/lib/docker_exec.sh"
# shellcheck disable=SC1090
source "$ROOT/lib/env.sh"
# shellcheck disable=SC1090
source "$ROOT/lib/secrets.sh"

sub="${1:-status}"; shift || true
case "$sub" in
  status) lds_secrets_status;;
  init) lds_secrets_init;;
  edit) lds_secrets_edit;;
  pull) lds_secrets_pull;;
  push) lds_secrets_push;;
  *) die "secrets <status|init|edit|pull|push>";;
esac
