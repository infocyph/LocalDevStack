#!/usr/bin/env bash
set -euo pipefail

ROOT="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)"
# shellcheck disable=SC1090
source "$ROOT/lib/bootstrap.sh"
# shellcheck disable=SC1090
source "$ROOT/lib/io.sh"
# shellcheck disable=SC1090
source "$ROOT/lib/docker.sh"
# shellcheck disable=SC1090
source "$ROOT/lib/docker_exec.sh"
# shellcheck disable=SC1090
source "$ROOT/lib/env.sh"
# shellcheck disable=SC1090
source "$ROOT/lib/open.sh"

usage(){
  cat <<USG
Usage:
  lds open <mail|db|redis|kibana|domain>
USG
}

name="${1:-}"; [[ -n "$name" ]] || { usage; exit 1; }
case "$name" in
  mail)  url="https://webmail.localhost";;
  db)    url="https://db.localhost";;
  redis) url="https://ri.localhost";;
  kibana) url="https://kibana.localhost";;
  *) url="https://$name";;
esac

lds_open_url "$url"
