#!/usr/bin/env bash
set -euo pipefail

ROOT="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)"
# shellcheck disable=SC1090
source "$ROOT/lib/bootstrap.sh"
# shellcheck disable=SC1090
source "$ROOT/lib/io.sh"
# shellcheck disable=SC1090
source "$ROOT/lib/docker.sh"
# shellcheck disable=SC1090
source "$ROOT/lib/docker_exec.sh"
# shellcheck disable=SC1090
source "$ROOT/lib/env.sh"
# shellcheck disable=SC1090
source "$ROOT/lib/notify.sh"

sub="${1:-send}"; shift || true
case "$sub" in
  send)
    title="${1:-LDS}"; msg="${2:-}";
    [[ -n "$msg" ]] || die "notify send <title> <message>"
    lds_notify_send "$title" "$msg";;
  test)
    lds_notify_send "LDS" "notify test";;
  *) die "notify <send|test>";;
esac
